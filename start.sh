#!/bin/bash
# Bç«™é«˜è´¨é‡è§†é¢‘çˆ¬è™« - ä¸€é”®å¯åŠ¨è„šæœ¬
# æ”¯æŒåˆ†ç±»æ’è¡Œæ¦œå’Œçƒ­é—¨é¡µé¢ä¸¤ç§æ¨¡å¼

echo "ğŸ”¥ Bç«™é«˜è´¨é‡è§†é¢‘çˆ¬è™« v2.0"
echo "=================================="
echo ""
echo "è¯·é€‰æ‹©çˆ¬å–æ¨¡å¼ï¼š"
echo "1) åˆ†ç±»æ’è¡Œæ¦œæ¨¡å¼ (20ä¸ªåˆ†ç±»ï¼Œæ¯ç±»æœ€å¤š100ä¸ªè§†é¢‘)"
echo "2) çƒ­é—¨é¡µé¢æ¨¡å¼ (ä¸é™åˆ†ç±»ï¼Œå¯è·å–æ›´å¤šè§†é¢‘)"
echo "3) åŒæ—¶è¿è¡Œä¸¤ç§æ¨¡å¼"
echo ""
read -p "è¯·è¾“å…¥é€‰æ‹© (1/2/3): " choice

case $choice in
    1)
        echo ""
        echo "ğŸ¯ å¯åŠ¨åˆ†ç±»æ’è¡Œæ¦œçˆ¬è™«..."
        python3 bilibili_crawler.py
        ;;
    2)
        echo ""
        read -p "è¯·è¾“å…¥ç›®æ ‡è§†é¢‘æ•°é‡ (é»˜è®¤500): " target_count
        target_count=${target_count:-500}
        echo "ğŸŒŸ å¯åŠ¨çƒ­é—¨é¡µé¢çˆ¬è™«ï¼Œç›®æ ‡æ•°é‡: $target_count"
        python3 popular_crawler.py $target_count
        ;;
    3)
        echo ""
        echo "ğŸš€ åŒæ—¶è¿è¡Œä¸¤ç§æ¨¡å¼..."
        echo ""
        echo "ğŸ“Š ç¬¬ä¸€æ­¥ï¼šè¿è¡Œåˆ†ç±»æ’è¡Œæ¦œçˆ¬è™«..."
        python3 bilibili_crawler.py
        
        echo ""
        echo "ğŸŒŸ ç¬¬äºŒæ­¥ï¼šè¿è¡Œçƒ­é—¨é¡µé¢çˆ¬è™«..."
        read -p "è¯·è¾“å…¥çƒ­é—¨é¡µé¢ç›®æ ‡æ•°é‡ (é»˜è®¤500): " target_count
        target_count=${target_count:-500}
        python3 popular_crawler.py $target_count
        ;;
    *)
        echo "âŒ æ— æ•ˆé€‰æ‹©"
        exit 1
        ;;
esac

echo ""
echo "ğŸ“ æŸ¥çœ‹ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶ï¼š"
echo "åˆ†ç±»æ’è¡Œæ¦œæ•°æ®:"
ls -la data/ranking/*.csv | tail -5
echo "çƒ­é—¨é¡µé¢æ•°æ®:"
ls -la data/popular/*.csv | tail -5

echo ""
echo "ğŸ‰ çˆ¬å–ä»»åŠ¡å®Œæˆï¼"
echo "ğŸ’¡ æç¤ºï¼šçƒ­é—¨é¡µé¢æ¨¡å¼å¯ä»¥è·å–æ›´å¤šè§†é¢‘æ•°æ®ï¼Œçªç ´æ’è¡Œæ¦œ100è§†é¢‘é™åˆ¶"
